{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/pavik/Desktop/nft-marketplace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/pavik/Desktop/nft-marketplace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/pavik/Desktop/nft-marketplace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"C:/Users/pavik/Desktop/nft-marketplace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useReducer}from'react';import MarketplaceContext from'./marketplace-context';import{jsx as _jsx}from\"react/jsx-runtime\";var defaultMarketplaceState={contract:null,offerCount:null,offers:[],userFunds:null,mktIsLoading:true};var marketplaceReducer=function marketplaceReducer(state,action){if(action.type==='CONTRACT'){return{contract:action.contract,offerCount:state.offerCount,offers:state.offers,userFunds:state.userFunds,mktIsLoading:state.mktIsLoading};}if(action.type==='LOADOFFERCOUNT'){return{contract:state.contract,offerCount:action.offerCount,offers:state.offers,userFunds:state.userFunds,mktIsLoading:state.mktIsLoading};}if(action.type==='LOADOFFERS'){return{contract:state.contract,offerCount:state.offerCount,offers:action.offers,userFunds:state.userFunds,mktIsLoading:state.mktIsLoading};}if(action.type==='UPDATEOFFER'){var offers=state.offers.filter(function(offer){return offer.offerId!==parseInt(action.offerId);});return{contract:state.contract,offerCount:state.offerCount,offers:offers,userFunds:state.userFunds,mktIsLoading:state.mktIsLoading};}if(action.type==='ADDOFFER'){var index=state.offers.findIndex(function(offer){return offer.offerId===parseInt(action.offer.offerId);});var _offers=[];if(index===-1){_offers=[].concat(_toConsumableArray(state.offers),[{offerId:parseInt(action.offer.offerId),id:parseInt(action.offer.id),user:action.offer.user,price:parseInt(action.offer.price),fulfilled:false,cancelled:false}]);}else{_offers=_toConsumableArray(state.offers);}return{contract:state.contract,offerCount:state.offerCount,offers:_offers,userFunds:state.userFunds,mktIsLoading:state.mktIsLoading};}if(action.type==='LOADFUNDS'){return{contract:state.contract,offerCount:state.offerCount,offers:state.offers,userFunds:action.userFunds,mktIsLoading:state.mktIsLoading};}if(action.type==='LOADING'){return{contract:state.contract,offerCount:state.offerCount,offers:state.offers,userFunds:state.userFunds,mktIsLoading:action.loading};}return defaultMarketplaceState;};var MarketplaceProvider=function MarketplaceProvider(props){var _useReducer=useReducer(marketplaceReducer,defaultMarketplaceState),_useReducer2=_slicedToArray(_useReducer,2),MarketplaceState=_useReducer2[0],dispatchMarketplaceAction=_useReducer2[1];var loadContractHandler=function loadContractHandler(web3,NFTMarketplace,deployedNetwork){var contract=deployedNetwork?new web3.eth.Contract(NFTMarketplace.abi,deployedNetwork.address):'';dispatchMarketplaceAction({type:'CONTRACT',contract:contract});return contract;};var loadOfferCountHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(contract){var offerCount;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return contract.methods.offerCount().call();case 2:offerCount=_context.sent;dispatchMarketplaceAction({type:'LOADOFFERCOUNT',offerCount:offerCount});return _context.abrupt(\"return\",offerCount);case 5:case\"end\":return _context.stop();}}},_callee);}));return function loadOfferCountHandler(_x){return _ref.apply(this,arguments);};}();var loadOffersHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(contract,offerCount){var offers,i,offer;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:offers=[];i=0;case 2:if(!(i<offerCount)){_context2.next=10;break;}_context2.next=5;return contract.methods.offers(i+1).call();case 5:offer=_context2.sent;offers.push(offer);case 7:i++;_context2.next=2;break;case 10:offers=offers.map(function(offer){offer.offerId=parseInt(offer.offerId);offer.id=parseInt(offer.id);offer.price=parseInt(offer.price);return offer;}).filter(function(offer){return offer.fulfilled===false&&offer.cancelled===false;});dispatchMarketplaceAction({type:'LOADOFFERS',offers:offers});case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function loadOffersHandler(_x2,_x3){return _ref2.apply(this,arguments);};}();var updateOfferHandler=function updateOfferHandler(offerId){dispatchMarketplaceAction({type:'UPDATEOFFER',offerId:offerId});};var addOfferHandler=function addOfferHandler(offer){dispatchMarketplaceAction({type:'ADDOFFER',offer:offer});};var loadUserFundsHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(contract,account){var userFunds;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return contract.methods.userFunds(account).call();case 2:userFunds=_context3.sent;dispatchMarketplaceAction({type:'LOADFUNDS',userFunds:userFunds});return _context3.abrupt(\"return\",userFunds);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function loadUserFundsHandler(_x4,_x5){return _ref3.apply(this,arguments);};}();var setMktIsLoadingHandler=function setMktIsLoadingHandler(loading){dispatchMarketplaceAction({type:'LOADING',loading:loading});};var marketplaceContext={contract:MarketplaceState.contract,offerCount:MarketplaceState.offerCount,offers:MarketplaceState.offers,userFunds:MarketplaceState.userFunds,mktIsLoading:MarketplaceState.mktIsLoading,loadContract:loadContractHandler,loadOfferCount:loadOfferCountHandler,loadOffers:loadOffersHandler,updateOffer:updateOfferHandler,addOffer:addOfferHandler,loadUserFunds:loadUserFundsHandler,setMktIsLoading:setMktIsLoadingHandler};return/*#__PURE__*/_jsx(MarketplaceContext.Provider,{value:marketplaceContext,children:props.children});};export default MarketplaceProvider;","map":{"version":3,"sources":["C:/Users/pavik/Desktop/nft-marketplace/src/store/MarketplaceProvider.js"],"names":["useReducer","MarketplaceContext","defaultMarketplaceState","contract","offerCount","offers","userFunds","mktIsLoading","marketplaceReducer","state","action","type","filter","offer","offerId","parseInt","index","findIndex","id","user","price","fulfilled","cancelled","loading","MarketplaceProvider","props","MarketplaceState","dispatchMarketplaceAction","loadContractHandler","web3","NFTMarketplace","deployedNetwork","eth","Contract","abi","address","loadOfferCountHandler","methods","call","loadOffersHandler","i","push","map","updateOfferHandler","addOfferHandler","loadUserFundsHandler","account","setMktIsLoadingHandler","marketplaceContext","loadContract","loadOfferCount","loadOffers","updateOffer","addOffer","loadUserFunds","setMktIsLoading","children"],"mappings":"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","sourcesContent":["import { useReducer } from 'react';\r\n\r\nimport MarketplaceContext from './marketplace-context';\r\n\r\nconst defaultMarketplaceState = {\r\n  contract: null,\r\n  offerCount: null,\r\n  offers: [],\r\n  userFunds: null,\r\n  mktIsLoading: true\r\n};\r\n\r\nconst marketplaceReducer = (state, action) => {\r\n  if(action.type === 'CONTRACT') {    \r\n    return {\r\n      contract: action.contract,\r\n      offerCount: state.offerCount,\r\n      offers: state.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADOFFERCOUNT') {    \r\n    return {\r\n      contract: state.contract,\r\n      offerCount: action.offerCount,\r\n      offers: state.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADOFFERS') {    \r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: action.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'UPDATEOFFER') {    \r\n    const offers = state.offers.filter(offer => offer.offerId !== parseInt(action.offerId));\r\n\r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'ADDOFFER') {    \r\n    const index = state.offers.findIndex(offer => offer.offerId === parseInt(action.offer.offerId));\r\n    let offers = [];\r\n\r\n    if(index === -1) {\r\n      offers = [...state.offers, {\r\n        offerId: parseInt(action.offer.offerId),\r\n        id: parseInt(action.offer.id),\r\n        user: (action.offer.user),\r\n        price: parseInt(action.offer.price),\r\n        fulfilled: false,\r\n        cancelled: false\r\n      }];\r\n    } else {\r\n      offers = [...state.offers];\r\n    }    \r\n\r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADFUNDS') {\r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: state.offers,\r\n      userFunds: action.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADING') {    \r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: state.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: action.loading\r\n    };\r\n  }\r\n  \r\n  return defaultMarketplaceState;\r\n};\r\n\r\nconst MarketplaceProvider = props => {\r\n  const [MarketplaceState, dispatchMarketplaceAction] = useReducer(marketplaceReducer, defaultMarketplaceState);\r\n  \r\n  const loadContractHandler = (web3, NFTMarketplace, deployedNetwork) => {\r\n    const contract = deployedNetwork ? new web3.eth.Contract(NFTMarketplace.abi, deployedNetwork.address): '';\r\n    dispatchMarketplaceAction({type: 'CONTRACT', contract: contract}); \r\n    return contract;\r\n  };\r\n\r\n  const loadOfferCountHandler = async(contract) => {\r\n    const offerCount = await contract.methods.offerCount().call();\r\n    dispatchMarketplaceAction({type: 'LOADOFFERCOUNT', offerCount: offerCount});\r\n    return offerCount;\r\n  };\r\n\r\n  const loadOffersHandler = async(contract, offerCount) => {\r\n    let offers = [];\r\n    for(let i = 0; i < offerCount; i++) {\r\n      const offer = await contract.methods.offers(i + 1).call();\r\n      offers.push(offer);\r\n    }\r\n    offers = offers\r\n    .map(offer => {\r\n      offer.offerId = parseInt(offer.offerId);\r\n      offer.id = parseInt(offer.id);\r\n      offer.price = parseInt(offer.price);\r\n      return offer;\r\n    })\r\n    .filter(offer => offer.fulfilled === false && offer.cancelled === false); \r\n    dispatchMarketplaceAction({type: 'LOADOFFERS', offers: offers});\r\n  };\r\n\r\n  const updateOfferHandler = (offerId) => {\r\n    dispatchMarketplaceAction({type: 'UPDATEOFFER', offerId: offerId});   \r\n  };\r\n\r\n  const addOfferHandler = (offer) => {\r\n    dispatchMarketplaceAction({type: 'ADDOFFER', offer: offer});   \r\n  };\r\n\r\n  const loadUserFundsHandler = async(contract, account) => {\r\n    const userFunds = await contract.methods.userFunds(account).call();\r\n    dispatchMarketplaceAction({type: 'LOADFUNDS', userFunds: userFunds});\r\n    return userFunds;\r\n  };\r\n\r\n  const setMktIsLoadingHandler = (loading) => {\r\n    dispatchMarketplaceAction({type: 'LOADING', loading: loading});\r\n  };\r\n\r\n  const marketplaceContext = {\r\n    contract: MarketplaceState.contract,\r\n    offerCount: MarketplaceState.offerCount,\r\n    offers: MarketplaceState.offers,\r\n    userFunds: MarketplaceState.userFunds,\r\n    mktIsLoading: MarketplaceState.mktIsLoading,\r\n    loadContract: loadContractHandler,\r\n    loadOfferCount: loadOfferCountHandler,\r\n    loadOffers: loadOffersHandler,\r\n    updateOffer: updateOfferHandler,\r\n    addOffer: addOfferHandler,\r\n    loadUserFunds: loadUserFundsHandler,\r\n    setMktIsLoading: setMktIsLoadingHandler\r\n  };\r\n  \r\n  return (\r\n    <MarketplaceContext.Provider value={marketplaceContext}>\r\n      {props.children}\r\n    </MarketplaceContext.Provider>\r\n  );\r\n};\r\n\r\nexport default MarketplaceProvider;"]},"metadata":{},"sourceType":"module"}